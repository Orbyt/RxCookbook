<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>RxCookbook by Orbyt</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>RxCookbook</h1>
        <p>Plug and play code samples for Reactive Extensions.</p>

        <p class="view"><a href="https://github.com/Orbyt/RxCookbook">View the Project on GitHub <small>Orbyt/RxCookbook</small></a></p>


        <ul>
          <li><a href="https://github.com/Orbyt/RxCookbook/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/Orbyt/RxCookbook/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/Orbyt/RxCookbook">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h3>
<a id="welcome-to-the-rxcookbook" class="anchor" href="#welcome-to-the-rxcookbook" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Welcome to the RxCookbook.</h3>

<p>This page aims to provide real world examples of the usage of RxJava/RxAndroid. Currently most samples are RxJava and RxAndroid. Feel free to submit a pull request for other samples.</p>

<h4>
<a id="polling-an-api-with-retrofit" class="anchor" href="#polling-an-api-with-retrofit" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Polling an API with Retrofit</h4>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">interface</span> <span class="pl-en">MyRetrofitService</span> {

    <span class="pl-k">@GET</span>(<span class="pl-s"><span class="pl-pds">"</span>/locations<span class="pl-pds">"</span></span>)
    <span class="pl-k">Observable&lt;<span class="pl-smi">Location</span>&gt;</span> <span class="pl-en">getLocation</span>();
}</pre></div>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Retrofit</span> retrofit <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">Retrofit</span>.<span class="pl-smi">Builder</span>()
                .baseUrl(<span class="pl-s"><span class="pl-pds">"</span>http://example.com<span class="pl-pds">"</span></span>)
                .addCallAdapterFactory(<span class="pl-smi">RxJavaCallAdapterFactory</span><span class="pl-k">.</span>create())
                .addConverterFactory(<span class="pl-smi">GsonConverterFactory</span><span class="pl-k">.</span>create())
                .build();</pre></div>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">MyRetrofitService</span> retrofitService <span class="pl-k">=</span> retrofit<span class="pl-k">.</span>create(<span class="pl-smi">MyRetrofitService</span><span class="pl-k">.</span>class);</pre></div>

<div class="highlight highlight-source-java"><pre><span class="pl-smi">Observable</span><span class="pl-k">.</span>interval(<span class="pl-c1">3000</span>, <span class="pl-smi">TimeUnit</span><span class="pl-c1"><span class="pl-k">.</span>MILLISECONDS</span>)
                .flatMap(param <span class="pl-k">-</span><span class="pl-k">&gt;</span> retrofitService<span class="pl-k">.</span>getLocation())
                .subscribeOn(<span class="pl-smi">Schedulers</span><span class="pl-k">.</span>io())
                .observeOn(<span class="pl-smi">AndroidSchedulers</span><span class="pl-k">.</span>mainThread())
                .subscribe(<span class="pl-k">new</span> <span class="pl-k">Subscriber&lt;<span class="pl-smi">Location</span>&gt;</span>() {
                    <span class="pl-k">@Override</span>
                    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onCompleted</span>() {
                        <span class="pl-smi">Log</span><span class="pl-k">.</span>d(<span class="pl-s"><span class="pl-pds">"</span>api<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>rx comleted<span class="pl-pds">"</span></span>);
                    }
                    <span class="pl-k">@Override</span>
                    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onError</span>(<span class="pl-smi">Throwable</span> <span class="pl-v">e</span>) {
                    }
                    <span class="pl-k">@Override</span>
                    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onNext</span>(<span class="pl-smi">Location</span> <span class="pl-v">location</span>) {
                        <span class="pl-smi">Log</span><span class="pl-k">.</span>d(<span class="pl-s"><span class="pl-pds">"</span>api<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>response: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> location<span class="pl-k">.</span>getSomeField());
                    }
                });</pre></div>

<h3>
<a id="delayed-search" class="anchor" href="#delayed-search" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Delayed Search</h3>

<div class="highlight highlight-source-java"><pre><span class="pl-k">private</span> <span class="pl-smi">Subscription</span> mSubscription;

mSubscription <span class="pl-k">=</span> <span class="pl-smi">RxTextView</span><span class="pl-k">.</span>textChangeEvents(mSearchField)
                .debounce(<span class="pl-c1">600</span>, <span class="pl-smi">TimeUnit</span><span class="pl-c1"><span class="pl-k">.</span>MILLISECONDS</span>)
                .observeOn(<span class="pl-smi">AndroidSchedulers</span><span class="pl-k">.</span>mainThread())
                .subscribe(<span class="pl-k">new</span> <span class="pl-k">Observer&lt;<span class="pl-smi">TextViewTextChangeEvent</span>&gt;</span>() {
                    <span class="pl-k">@Override</span>
                    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onCompleted</span>() {
                        <span class="pl-smi">Log</span><span class="pl-k">.</span>d(<span class="pl-c1">TAG</span>, <span class="pl-s"><span class="pl-pds">"</span>onCompleted() called<span class="pl-pds">"</span></span>);
                    }

                    <span class="pl-k">@Override</span>
                    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onError</span>(<span class="pl-smi">Throwable</span> <span class="pl-v">e</span>) {
                    }
                    <span class="pl-c">//Called every time theres a text change and then a pause for at least 600ms.</span>
                    <span class="pl-k">@Override</span>
                    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onNext</span>(<span class="pl-smi">TextViewTextChangeEvent</span> <span class="pl-v">textViewTextChangeEvent</span>) {
                        mSearchOutput<span class="pl-k">.</span>setText(<span class="pl-s"><span class="pl-pds">"</span>Searched for: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> textViewTextChangeEvent<span class="pl-k">.</span>text());
                    }
                });
</pre></div>

<h3>
<a id="flatten" class="anchor" href="#flatten" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Flatten</h3>

<div class="highlight highlight-source-java"><pre>
<span class="pl-k">public</span> <span class="pl-k">Observable&lt;<span class="pl-smi">Object</span>&gt;</span> rxflattenmylist(<span class="pl-k">List&lt;?&gt;</span> list) {
        <span class="pl-k">return</span> <span class="pl-smi">Observable</span><span class="pl-k">.</span>from(list)
                .flatMap(item <span class="pl-k">-</span><span class="pl-k">&gt;</span> item <span class="pl-k">instanceof</span> <span class="pl-k">List&lt;?&gt;</span> <span class="pl-k">?</span> rxflattenmylist((<span class="pl-k">List&lt;?&gt;</span>) item) <span class="pl-k">:</span> <span class="pl-smi">Observable</span><span class="pl-k">.</span>just(item));
    }

    <span class="pl-k">public</span> <span class="pl-k">Observable&lt;<span class="pl-k">List&lt;<span class="pl-smi">Object</span>&gt;</span>&gt;</span> rxflatten(<span class="pl-k">List&lt;<span class="pl-smi">Object</span>&gt;</span> list) {
        <span class="pl-k">return</span> rxflattenmylist(list)
                .toList();

    }</pre></div>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/Orbyt">Orbyt</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
